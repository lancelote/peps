
<!DOCTYPE html>
<html lang="en">
<head>
    <meta charset="utf-8">
    <meta name="viewport" content="width=device-width, initial-scale=1.0">
    <meta name="color-scheme" content="light dark">
    <title>PEP 752 – Package repository namespaces | peps.python.org</title>
    <link rel="shortcut icon" href="../_static/py.png">
    <link rel="canonical" href="https://peps.python.org/pep-0752/">
    <link rel="stylesheet" href="../_static/style.css" type="text/css">
    <link rel="stylesheet" href="../_static/mq.css" type="text/css">
    <link rel="stylesheet" href="../_static/pygments.css" type="text/css" media="(prefers-color-scheme: light)" id="pyg-light">
    <link rel="stylesheet" href="../_static/pygments_dark.css" type="text/css" media="(prefers-color-scheme: dark)" id="pyg-dark">
    <link rel="alternate" type="application/rss+xml" title="Latest PEPs" href="https://peps.python.org/peps.rss">
    <meta property="og:title" content='PEP 752 – Package repository namespaces | peps.python.org'>
    <meta property="og:description" content="This PEP specifies a way for organizations to reserve package name prefixes for future uploads.">
    <meta property="og:type" content="website">
    <meta property="og:url" content="https://peps.python.org/pep-0752/">
    <meta property="og:site_name" content="Python Enhancement Proposals (PEPs)">
    <meta property="og:image" content="https://peps.python.org/_static/og-image.png">
    <meta property="og:image:alt" content="Python PEPs">
    <meta property="og:image:width" content="200">
    <meta property="og:image:height" content="200">
    <meta name="description" content="This PEP specifies a way for organizations to reserve package name prefixes for future uploads.">
    <meta name="theme-color" content="#3776ab">
</head>
<body>
    
<svg xmlns="http://www.w3.org/2000/svg" style="display: none;">
  <symbol id="svg-sun-half" viewBox="0 0 24 24" pointer-events="all">
    <title>Following system colour scheme</title>
    <svg xmlns="http://www.w3.org/2000/svg" viewBox="0 0 24 24" fill="none"
         stroke="currentColor" stroke-width="2" stroke-linecap="round" stroke-linejoin="round">
      <circle cx="12" cy="12" r="9"></circle>
      <path d="M12 3v18m0-12l4.65-4.65M12 14.3l7.37-7.37M12 19.6l8.85-8.85"></path>
    </svg>
  </symbol>
  <symbol id="svg-moon" viewBox="0 0 24 24" pointer-events="all">
    <title>Selected dark colour scheme</title>
    <svg xmlns="http://www.w3.org/2000/svg" viewBox="0 0 24 24" fill="none"
         stroke="currentColor" stroke-width="2" stroke-linecap="round" stroke-linejoin="round">
      <path stroke="none" d="M0 0h24v24H0z" fill="none"></path>
      <path d="M12 3c.132 0 .263 0 .393 0a7.5 7.5 0 0 0 7.92 12.446a9 9 0 1 1 -8.313 -12.454z"></path>
    </svg>
  </symbol>
  <symbol id="svg-sun" viewBox="0 0 24 24" pointer-events="all">
    <title>Selected light colour scheme</title>
    <svg xmlns="http://www.w3.org/2000/svg" viewBox="0 0 24 24" fill="none"
         stroke="currentColor" stroke-width="2" stroke-linecap="round" stroke-linejoin="round">
      <circle cx="12" cy="12" r="5"></circle>
      <line x1="12" y1="1" x2="12" y2="3"></line>
      <line x1="12" y1="21" x2="12" y2="23"></line>
      <line x1="4.22" y1="4.22" x2="5.64" y2="5.64"></line>
      <line x1="18.36" y1="18.36" x2="19.78" y2="19.78"></line>
      <line x1="1" y1="12" x2="3" y2="12"></line>
      <line x1="21" y1="12" x2="23" y2="12"></line>
      <line x1="4.22" y1="19.78" x2="5.64" y2="18.36"></line>
      <line x1="18.36" y1="5.64" x2="19.78" y2="4.22"></line>
    </svg>
  </symbol>
</svg>
    <script>

        document.documentElement.dataset.colour_scheme = localStorage.getItem("colour_scheme") || "auto"
    </script>
    <section id="pep-page-section">
        <header>
            <h1>Python Enhancement Proposals</h1>
            <ul class="breadcrumbs">
                <li><a href="https://www.python.org/" title="The Python Programming Language">Python</a> &raquo; </li>
                <li><a href="../pep-0000/">PEP Index</a> &raquo; </li>
                <li>PEP 752</li>
            </ul>
            <button id="colour-scheme-cycler" onClick="setColourScheme(nextColourScheme())">
                <svg aria-hidden="true" class="colour-scheme-icon-when-auto"><use href="#svg-sun-half"></use></svg>
                <svg aria-hidden="true" class="colour-scheme-icon-when-dark"><use href="#svg-moon"></use></svg>
                <svg aria-hidden="true" class="colour-scheme-icon-when-light"><use href="#svg-sun"></use></svg>
                <span class="visually-hidden">Toggle light / dark / auto colour theme</span>
            </button>
        </header>
        <article>
            <section id="pep-content">
<h1 class="page-title">PEP 752 – Package repository namespaces</h1>
<dl class="rfc2822 field-list simple">
<dt class="field-odd">Author<span class="colon">:</span></dt>
<dd class="field-odd">Ofek Lev &lt;ofekmeister&#32;&#97;t&#32;gmail.com&gt;</dd>
<dt class="field-even">Sponsor<span class="colon">:</span></dt>
<dd class="field-even">Barry Warsaw &lt;barry&#32;&#97;t&#32;python.org&gt;</dd>
<dt class="field-odd">PEP-Delegate<span class="colon">:</span></dt>
<dd class="field-odd">Dustin Ingram &lt;di&#32;&#97;t&#32;python.org&gt;</dd>
<dt class="field-even">Discussions-To<span class="colon">:</span></dt>
<dd class="field-even"><a class="reference external" href="https://discuss.python.org/t/61227">Discourse thread</a></dd>
<dt class="field-odd">Status<span class="colon">:</span></dt>
<dd class="field-odd"><abbr title="Proposal under active discussion and revision">Draft</abbr></dd>
<dt class="field-even">Type<span class="colon">:</span></dt>
<dd class="field-even"><abbr title="Normative PEP with a new feature for Python, implementation change for CPython or interoperability standard for the ecosystem">Standards Track</abbr></dd>
<dt class="field-odd">Topic<span class="colon">:</span></dt>
<dd class="field-odd"><a class="reference external" href="../topic/packaging/">Packaging</a></dd>
<dt class="field-even">Created<span class="colon">:</span></dt>
<dd class="field-even">13-Aug-2024</dd>
<dt class="field-odd">Post-History<span class="colon">:</span></dt>
<dd class="field-odd"><a class="reference external" href="https://discuss.python.org/t/61227" title="Discourse thread">18-Aug-2024</a></dd>
</dl>
<hr class="docutils" />
<section id="contents">
<details><summary>Table of Contents</summary><ul class="simple">
<li><a class="reference internal" href="#abstract">Abstract</a></li>
<li><a class="reference internal" href="#motivation">Motivation</a></li>
<li><a class="reference internal" href="#rationale">Rationale</a><ul>
<li><a class="reference internal" href="#tolerance-for-disruption">Tolerance for Disruption</a></li>
<li><a class="reference internal" href="#approval-process">Approval Process</a></li>
</ul>
</li>
<li><a class="reference internal" href="#terminology">Terminology</a></li>
<li><a class="reference internal" href="#specification">Specification</a><ul>
<li><a class="reference internal" href="#naming">Naming</a></li>
<li><a class="reference internal" href="#grant-semantics">Grant Semantics</a></li>
<li><a class="reference internal" href="#grant-types">Grant Types</a><ul>
<li><a class="reference internal" href="#root-grant">Root Grant</a></li>
<li><a class="reference internal" href="#child-grant">Child Grant</a></li>
</ul>
</li>
<li><a class="reference internal" href="#grant-ownership">Grant Ownership</a></li>
<li><a class="reference internal" href="#uploads">Uploads</a></li>
<li><a class="reference internal" href="#user-interface">User Interface</a></li>
<li><a class="reference internal" href="#shared-namespaces">Shared Namespaces</a></li>
<li><a class="reference internal" href="#repository-metadata">Repository Metadata</a></li>
<li><a class="reference internal" href="#grant-removal">Grant Removal</a></li>
<li><a class="reference internal" href="#grant-applications">Grant Applications</a><ul>
<li><a class="reference internal" href="#submission">Submission</a></li>
<li><a class="reference internal" href="#approval-criteria">Approval Criteria</a></li>
</ul>
</li>
</ul>
</li>
<li><a class="reference internal" href="#recommendations">Recommendations</a><ul>
<li><a class="reference internal" href="#visual-indicators">Visual Indicators</a></li>
<li><a class="reference internal" href="#id22">Grant Applications</a></li>
</ul>
</li>
<li><a class="reference internal" href="#backwards-compatibility">Backwards Compatibility</a></li>
<li><a class="reference internal" href="#security-implications">Security Implications</a></li>
<li><a class="reference internal" href="#how-to-teach-this">How to Teach This</a></li>
<li><a class="reference internal" href="#reference-implementation">Reference Implementation</a></li>
<li><a class="reference internal" href="#rejected-ideas">Rejected Ideas</a><ul>
<li><a class="reference internal" href="#organization-scoping">Organization Scoping</a></li>
<li><a class="reference internal" href="#allow-private-namespaces-for-community-projects">Allow Private Namespaces for Community Projects</a></li>
</ul>
</li>
<li><a class="reference internal" href="#open-issues">Open Issues</a></li>
<li><a class="reference internal" href="#footnotes">Footnotes</a></li>
<li><a class="reference internal" href="#copyright">Copyright</a></li>
</ul>
</details></section>
<section id="abstract">
<h2><a class="toc-backref" href="#abstract" role="doc-backlink">Abstract</a></h2>
<p>This PEP specifies a way for organizations to reserve package name prefixes
for future uploads.</p>
<blockquote>
<div>“Namespaces are one honking great idea – let’s do more of
those!” - <a class="pep reference internal" href="../pep-0020/" title="PEP 20 – The Zen of Python">PEP 20</a></div></blockquote>
</section>
<section id="motivation">
<h2><a class="toc-backref" href="#motivation" role="doc-backlink">Motivation</a></h2>
<p>The current ecosystem lacks a way for projects with many packages to signal a
verified pattern of ownership. Some examples:</p>
<ul class="simple">
<li><a class="reference external" href="https://github.com/python/typeshed">Typeshed</a> is a community effort to
maintain type stubs for various packages. The stub packages they maintain
mirror the package name they target and are prefixed by <code class="docutils literal notranslate"><span class="pre">types-</span></code>. For
example, the package <code class="docutils literal notranslate"><span class="pre">requests</span></code> has a stub that users would depend on
called <code class="docutils literal notranslate"><span class="pre">types-requests</span></code>.</li>
<li>Major cloud providers like Amazon, Google and Microsoft have a common prefix
for each feature’s corresponding package <a class="footnote-reference brackets" href="#id25" id="id1">[1]</a>. For example, most of Google’s
packages are prefixed by <code class="docutils literal notranslate"><span class="pre">google-cloud-</span></code> e.g. <code class="docutils literal notranslate"><span class="pre">google-cloud-compute</span></code> for
<a class="reference external" href="https://cloud.google.com/products/compute">using virtual machines</a>.</li>
<li>Many projects <a class="footnote-reference brackets" href="#id26" id="id2">[2]</a> support a model where some packages are officially
maintained and third-party developers are encouraged to participate by
creating their own. For example, <a class="reference external" href="https://www.datadoghq.com">Datadog</a>
offers observability as a service for organizations at any scale. The
<a class="reference external" href="https://docs.datadoghq.com/agent/">Datadog Agent</a> ships out-of-the-box
with
<a class="reference external" href="https://github.com/DataDog/integrations-core">official integrations</a>
for many products, like various databases and web servers, which are
distributed as Python packages that are prefixed by <code class="docutils literal notranslate"><span class="pre">datadog-</span></code>. There is
support for creating <a class="reference external" href="https://docs.datadoghq.com/developers/integrations/agent_integration/">third-party integrations</a> which customers may run.</li>
</ul>
<p>Such projects are uniquely vulnerable to name-squatting attacks
which can ultimately result in <a class="reference external" href="https://www.activestate.com/resources/quick-reads/dependency-confusion/">dependency confusion</a>.</p>
<p>For example, say a new product is released for which monitoring would be
valuable. It would be reasonable to assume that Datadog would eventually
support it as an official integration. It takes a nontrivial amount of time to
deliver such an integration due to roadmap prioritization and the time required
for implementation. It would be impossible to reserve the name of every
potential package so in the interim an attacker may create a package that
appears legitimate which would execute malicious code at runtime. Not only are
users more likely to install such packages but doing so taints the perception
of the entire project.</p>
<p>Although <a class="pep reference internal" href="../pep-0708/" title="PEP 708 – Extending the Repository API to Mitigate Dependency Confusion Attacks">PEP 708</a> attempts to address this attack vector, it is specifically
about the case of multiple repositories being considered during dependency
resolution and does not offer any protection to the aforementioned use cases.</p>
<p>Namespacing also would drastically reduce the incidence of
<a class="reference external" href="https://en.wikipedia.org/wiki/Typosquatting">typosquatting</a>
because typos would have to be in the prefix itself which is
<a class="reference internal" href="#naming">normalized</a> and likely to be a short, well-known identifier like
<code class="docutils literal notranslate"><span class="pre">aws-</span></code>.</p>
</section>
<section id="rationale">
<h2><a class="toc-backref" href="#rationale" role="doc-backlink">Rationale</a></h2>
<section id="tolerance-for-disruption">
<h3><a class="toc-backref" href="#tolerance-for-disruption" role="doc-backlink">Tolerance for Disruption</a></h3>
<p>Other package ecosystems have generally solved this problem by taking one of
two approaches: either minimizing or maximizing backwards compatibility.</p>
<ul class="simple">
<li><a class="reference external" href="https://www.npmjs.com">NPM</a> has the concept of
<a class="reference external" href="https://docs.npmjs.com/about-scopes">scoped packages</a> which were
<a class="reference external" href="https://blog.npmjs.org/post/116936804365/solving-npms-hard-problem-naming-packages">introduced</a> primarily to combat there being a dearth of available good
package names (whether a real or perceived phenomenon). When a user or
organization signs up they are given a scope that matches their name. For
example, the
<a class="reference external" href="https://www.npmjs.com/package/&#64;google-cloud/storage">package</a> for using
Google Cloud Storage is <code class="docutils literal notranslate"><span class="pre">&#64;google-cloud/storage</span></code> where <code class="docutils literal notranslate"><span class="pre">&#64;google-cloud/</span></code> is
the scope. Regular user accounts (non-organization) may publish <a class="reference external" href="https://docs.npmjs.com/package-scope-access-level-and-visibility">unscoped</a>
packages for public use.
This approach has the lowest amount of backwards compatibility because every
installer and tool has to be modified to account for scopes.</li>
<li><a class="reference external" href="https://www.nuget.org">NuGet</a> has the concept of
<a class="reference external" href="https://learn.microsoft.com/en-us/nuget/nuget-org/id-prefix-reservation">package ID prefix reservation</a> which was
<a class="reference external" href="https://devblogs.microsoft.com/nuget/Package-identity-and-trust/">introduced</a> primarily to satisfy users wishing to know where a package
came from. A package name prefix may be reserved for use by one or more
owners. Every reserved package has a special indication
<a class="reference external" href="https://www.nuget.org/packages/Google.Cloud.Storage.V1">on its page</a> to
communicate this. After reservation, any upload with a reserved prefix will
fail if the user is not an owner of the prefix. Existing packages that have a
prefix that is owned may continue to release as usual. This approach has the
highest amount of backwards compatibility because only modifications to
indices like PyPI are required and installers do not need to change.</li>
</ul>
<p>This PEP specifies the NuGet approach of authorized reservation across a flat
namespace for the following reasons:</p>
<ul class="simple">
<li>Causing churn for the community is a hard blocker.</li>
<li>The NPM approach has the potential to cause confusion for users if we allow
unscoped names. Our community has chosen to normalize separator characters
and so <code class="docutils literal notranslate"><span class="pre">&#64;aws/s3</span></code> would likely be confused with <code class="docutils literal notranslate"><span class="pre">&#64;aws-s3</span></code>.</li>
</ul>
</section>
<section id="approval-process">
<h3><a class="toc-backref" href="#approval-process" role="doc-backlink">Approval Process</a></h3>
<p>PyPI has been understaffed, receiving the first <a class="reference external" href="https://pyfound.blogspot.com/2024/07/announcing-our-new-pypi-support.html">dedicated specialist</a> in
July 2024. Due to lack of resources, user support has been lacking for
<a class="reference external" href="https://discuss.python.org/t/27436/19">package name claims</a>,
<a class="reference external" href="https://discuss.python.org/t/33764/15">organization requests</a>,
<a class="reference external" href="https://discuss.python.org/t/54035">storage limit increases</a>,
and even <a class="reference external" href="https://discuss.python.org/t/43422/122">account recovery</a>.</p>
<p>The <a class="reference internal" href="#grant-approval-criteria">default policy</a> of only allowing
<a class="reference external" href="https://docs.pypi.org/organization-accounts/pricing-and-payments/#corporate-organizations">corporate organizations</a> to reserve namespaces (except in
specific scenarios) provides the following benefits:</p>
<ul class="simple">
<li>PyPI would have a constant source of funding for support specialists,
infrastructure maintenance and new features.</li>
<li>Although each application would require independent review, less human
feedback would be required because the process to approve a paid organization
already bestows a certain amount of trust.</li>
</ul>
</section>
</section>
<section id="terminology">
<h2><a class="toc-backref" href="#terminology" role="doc-backlink">Terminology</a></h2>
<p>The key words “MUST”, “MUST NOT”, “REQUIRED”, “SHALL”, “SHALL NOT”, “SHOULD”,
“SHOULD NOT”, “RECOMMENDED”, “MAY”, and “OPTIONAL” in this document are to be
interpreted as described in <span class="target" id="index-0"></span><a class="rfc reference external" href="https://datatracker.ietf.org/doc/html/rfc2119.html"><strong>RFC 2119</strong></a>.</p>
<dl class="simple">
<dt>Organization</dt><dd><a class="reference external" href="https://blog.pypi.org/posts/2023-04-23-introducing-pypi-organizations/">Organizations</a> are entities that own projects and have various
users associated with them. Only organizations have access to the namespace
application form.</dd>
<dt>Corporate Organization</dt><dd><a class="reference external" href="https://docs.pypi.org/organization-accounts/pricing-and-payments/#corporate-organizations">Corporate organizations</a> are organizations that have paid
for special functionality on PyPI.</dd>
<dt>Shared Namespace</dt><dd>A <a class="reference internal" href="#shared-namespaces">shared</a> namespace allows for uploads from any
project owner.</dd>
<dt>Private Namespace</dt><dd>A private namespace only allows uploads from an owner of the namespace.</dd>
</dl>
</section>
<section id="specification">
<h2><a class="toc-backref" href="#specification" role="doc-backlink">Specification</a></h2>
<p><a class="reference external" href="https://blog.pypi.org/posts/2023-04-23-introducing-pypi-organizations/">Organizations</a> (NOT regular users) MAY reserve one or more
namespaces. Such reservations neither confer ownership nor grant special
privileges to existing projects.</p>
<section id="naming">
<span id="id10"></span><h3><a class="toc-backref" href="#naming" role="doc-backlink">Naming</a></h3>
<p>A namespace MUST be a <a class="reference external" href="https://packaging.python.org/en/latest/specifications/name-normalization/#name-format">valid</a> project name and <a class="reference external" href="https://packaging.python.org/en/latest/specifications/name-normalization/#name-normalization">normalized</a> internally e.g.
<code class="docutils literal notranslate"><span class="pre">foo.bar</span></code> would become <code class="docutils literal notranslate"><span class="pre">foo-bar</span></code>. The user facing namespace (e.g. in UI
tooltips) MUST preserve the original pre-normalized text as defined during
reservation.</p>
</section>
<section id="grant-semantics">
<h3><a class="toc-backref" href="#grant-semantics" role="doc-backlink">Grant Semantics</a></h3>
<p>A namespace grant bestows ownership over the following:</p>
<ol class="arabic simple">
<li>A project matching the namespace itself such as the placeholder package
<a class="reference external" href="https://pypi.org/project/microsoft/">microsoft</a>.</li>
<li>Projects that start with the namespace followed by a hyphen. For example,
the namespace <code class="docutils literal notranslate"><span class="pre">foo</span></code> would match the normalized project name <code class="docutils literal notranslate"><span class="pre">foo-bar</span></code>
but not the project name <code class="docutils literal notranslate"><span class="pre">foobar</span></code>.</li>
</ol>
<p>Package name matching acts upon the <a class="reference internal" href="#naming">normalized</a> namespace.</p>
<p>Namespaces are per-package repository and SHALL NOT be shared between
repositories. Each repository is responsible for managing namespaces the way
they want, and repositories are not expected to replicate namespaces from one
repository to another.</p>
</section>
<section id="grant-types">
<h3><a class="toc-backref" href="#grant-types" role="doc-backlink">Grant Types</a></h3>
<p>There are two types of grants.</p>
<section id="root-grant">
<span id="id13"></span><h4><a class="toc-backref" href="#root-grant" role="doc-backlink">Root Grant</a></h4>
<p>Only <a class="reference external" href="https://blog.pypi.org/posts/2023-04-23-introducing-pypi-organizations/">organizations</a> have the ability to submit requests for namespace
grants. An organization gets a root grant for every accepted request. This
grant may produce any number of <a class="reference internal" href="#child-grant">child grants</a>.</p>
<p>Root grants MUST NOT overlap. For example, if there is an existing root grant
for <code class="docutils literal notranslate"><span class="pre">foo-bar</span></code> then an organization cannot <a class="reference internal" href="#grant-application">apply</a> for
<code class="docutils literal notranslate"><span class="pre">foo</span></code>. An overlap is determined by comparing the <a class="reference internal" href="#naming">normalized</a>
proposed namespace with the normalized namespace of every existing root grant.
Every comparison must append a hyphen to the end of the proposed and existing
namespace. An overlap is detected when any existing namespace starts with the
proposed namespace.</p>
</section>
<section id="child-grant">
<span id="id14"></span><h4><a class="toc-backref" href="#child-grant" role="doc-backlink">Child Grant</a></h4>
<p>A child grant is created by the owner of a <a class="reference internal" href="#root-grant">root grant</a>. The
child namespace MUST be prefixed by the root grant namespace followed by a
hyphen. For example, <code class="docutils literal notranslate"><span class="pre">google-cloud</span></code> would be a valid child of the root
namespace <code class="docutils literal notranslate"><span class="pre">google</span></code>.</p>
<p>Child grants cannot have their own child grants.</p>
</section>
</section>
<section id="grant-ownership">
<span id="id15"></span><h3><a class="toc-backref" href="#grant-ownership" role="doc-backlink">Grant Ownership</a></h3>
<p>The owner of a grant may allow any number of other organizations to use the
grant. The grants behave as if they were owned by the organization. The owner
may revoke this permission at any time.</p>
<p>The owner may transfer ownership to another organization. If the organization
is a corporate organization, the target for transfer must also be. Settings for
permitted organizations are transferred as well.</p>
</section>
<section id="uploads">
<span id="id16"></span><h3><a class="toc-backref" href="#uploads" role="doc-backlink">Uploads</a></h3>
<p>If the following criteria are all true for a given upload:</p>
<ol class="arabic simple">
<li>The project does not yet exist.</li>
<li>The name matches a reserved namespace.</li>
<li>The project is not owned by an organization with an active grant for the
namespace.</li>
</ol>
<p>Then the upload MUST fail with a 403 HTTP status code.</p>
</section>
<section id="user-interface">
<span id="id17"></span><h3><a class="toc-backref" href="#user-interface" role="doc-backlink">User Interface</a></h3>
<p>Every project’s page
(<a class="reference external" href="https://pypi.org/project/google-cloud-compute/1.19.2/">example</a>)
that matches an active namespace grant MUST indicate what the prefix is (NuGet
currently does not do this). This value MUST match the <code class="docutils literal notranslate"><span class="pre">namespace.name</span></code> key
in the <a class="reference internal" href="#repository-metadata">API</a>.</p>
<p>Clicking on the namespace MUST take the user to a page that has more
information such as the current owners and the time at which ownership was
granted. This page SHOULD enumerate every project that matches the namespace
and display a count of the total number of projects.</p>
<p>Any indicator used in the following scenarios for projects that match an active
namespace grant MUST be distinct from one another:</p>
<ol class="arabic simple">
<li>Projects that are tied to a <a class="reference internal" href="#grant-ownership">grant owner</a> MAY have an
indicator.</li>
<li>Projects that are not tied to a <a class="reference internal" href="#grant-ownership">grant owner</a> and the
matching grant is <a class="reference internal" href="#shared-namespaces">shared</a> MUST have an indicator.</li>
<li>Projects that are not tied to a <a class="reference internal" href="#grant-ownership">grant owner</a> and the
matching grant is private MUST have an indicator. This situation arises when
the project existed before the grant was created.</li>
</ol>
<p>Repositories MUST NOT offer a way to view all active namespace grants. This is
to prevent leaking potentially private information such as an upcoming product.</p>
</section>
<section id="shared-namespaces">
<span id="id18"></span><h3><a class="toc-backref" href="#shared-namespaces" role="doc-backlink">Shared Namespaces</a></h3>
<p>The owner of a grant may choose to allow others the ability to release new
projects with the associated namespace. Doing so MUST allow
<a class="reference internal" href="#uploads">uploads</a> for new projects matching the namespace from any user
but such projects MUST have a distinct <a class="reference internal" href="#user-interface">visual indicator</a>.</p>
<p>It is possible for the <a class="reference internal" href="#grant-ownership">owner</a> of a namespace to both make
it shared and allow other organizations to use the grant. In this case, the
permitted organizations have no special permissions and are equivalent to a
shared grant without ownership.</p>
<p>When a <a class="reference internal" href="#child-grant">child grant</a> is created, its shared status SHALL be
inherited from the <a class="reference internal" href="#root-grant">root grant</a>. Owners of child grants MAY
make them shared at any time. If a grant is shared, it MUST NOT be made private
unless the owner of the grant is the owner of every project that matches the
namespace.</p>
<p>Root grants given to <a class="reference internal" href="#grant-approval-criteria">community projects</a> SHOULD
only be shared but is ultimately up to the reviewer of the application.</p>
</section>
<section id="repository-metadata">
<span id="id19"></span><h3><a class="toc-backref" href="#repository-metadata" role="doc-backlink">Repository Metadata</a></h3>
<p>To allow installers and other tooling insight into this project-level metadata
of a namespaced project, the <a class="pep reference internal" href="../pep-0691/" title="PEP 691 – JSON-based Simple API for Python Package Indexes">JSON API</a> version will be incremented
and support new keys for the project endpoint.</p>
<p>The <code class="docutils literal notranslate"><span class="pre">owner</span></code> key SHOULD be added and refer to the owner of the project,
whether an organization or a user.</p>
<p>The <code class="docutils literal notranslate"><span class="pre">namespace</span></code> key MAY be added and MUST be <code class="docutils literal notranslate"><span class="pre">null</span></code> if the project does not
match an active namespace grant. If the project does match a namespace grant,
the value MUST be a mapping with the following keys:</p>
<ul class="simple">
<li><code class="docutils literal notranslate"><span class="pre">name</span></code>: This is the associated <a class="reference internal" href="#naming">normalized</a> namespace e.g.
<code class="docutils literal notranslate"><span class="pre">foo-bar</span></code>. If the owner of the project owns multiple matching grants then
this MUST be the namespace with the most number of characters. For example,
if the project name matched both <code class="docutils literal notranslate"><span class="pre">foo-bar</span></code> and <code class="docutils literal notranslate"><span class="pre">foo-bar-baz</span></code> then this
key would be the latter.</li>
<li><code class="docutils literal notranslate"><span class="pre">owners</span></code>: This is an array of organizations that
<a class="reference internal" href="#grant-ownership">own</a> the grant. This is useful for tools that wish to
make a distinction between official and community packages by checking if
the array contains the project <code class="docutils literal notranslate"><span class="pre">owner</span></code>.</li>
<li><code class="docutils literal notranslate"><span class="pre">shared</span></code>: This is a boolean indicating whether the namespace is
<a class="reference internal" href="#shared-namespaces">shared</a>.</li>
</ul>
<p>The presence of the <code class="docutils literal notranslate"><span class="pre">namespace</span></code> key indicates support for this PEP.</p>
</section>
<section id="grant-removal">
<h3><a class="toc-backref" href="#grant-removal" role="doc-backlink">Grant Removal</a></h3>
<p>If a grant is shared with other organizations, the owner organization MUST
initiate a transfer as a prerequisite for organization deletion.</p>
<p>If a grant is not shared, the owner may unclaim the namespace in either of the
following circumstances:</p>
<ul class="simple">
<li>The organization manually removes themselves as the owner.</li>
<li>The organization is deleted.</li>
</ul>
<p>When a reserved namespace becomes unclaimed, repositories:</p>
<ol class="arabic simple">
<li>MUST remove the <a class="reference internal" href="#user-interface">visual indicator</a></li>
<li>MUST remove the <code class="docutils literal notranslate"><span class="pre">namespace</span></code> key in the <a class="reference internal" href="#repository-metadata">API</a></li>
</ol>
</section>
<section id="grant-applications">
<h3><a class="toc-backref" href="#grant-applications" role="doc-backlink">Grant Applications</a></h3>
<section id="submission">
<span id="grant-application"></span><h4><a class="toc-backref" href="#submission" role="doc-backlink">Submission</a></h4>
<p>Only <a class="reference external" href="https://blog.pypi.org/posts/2023-04-23-introducing-pypi-organizations/">organizations</a> have access to the page for submitting grant
applications. Reviews of <a class="reference external" href="https://docs.pypi.org/organization-accounts/pricing-and-payments/#corporate-organizations">corporate organizations</a> applications
MUST be prioritized.</p>
</section>
<section id="approval-criteria">
<span id="grant-approval-criteria"></span><h4><a class="toc-backref" href="#approval-criteria" role="doc-backlink">Approval Criteria</a></h4>
<ol class="arabic simple">
<li>The namespace MUST NOT be something common like <code class="docutils literal notranslate"><span class="pre">tool</span></code> or <code class="docutils literal notranslate"><span class="pre">apps</span></code>.</li>
<li>The namespace SHOULD be greater than three characters.</li>
<li>The namespace SHOULD properly and clearly identify the reservation owner.</li>
<li>The organization SHOULD be actively using the namespace.</li>
<li>There SHOULD be evidence that <em>not</em> reserving the namespace may cause
ambiguity, confusion, or other harm to the community.</li>
</ol>
<p>Organizations that are not <a class="reference external" href="https://docs.pypi.org/organization-accounts/pricing-and-payments/#corporate-organizations">corporate organizations</a> MUST
represent one of the following:</p>
<ul class="simple">
<li>Large, popular open-source projects with many packages <a class="footnote-reference brackets" href="#id26" id="id20">[2]</a></li>
<li>Universities that actively publish packages</li>
<li>Government organizations that actively publish packages</li>
<li>NPOs/NGOs that actively publish packages like
<a class="reference external" href="https://github.com/owid">Our World in Data</a></li>
</ul>
</section>
</section>
</section>
<section id="recommendations">
<h2><a class="toc-backref" href="#recommendations" role="doc-backlink">Recommendations</a></h2>
<section id="visual-indicators">
<h3><a class="toc-backref" href="#visual-indicators" role="doc-backlink">Visual Indicators</a></h3>
<p>For projects that match an active namespace grant, the namespace is always
shown in <a class="reference internal" href="#user-interface">the UI</a>. It is recommended that this should
stand out as a pill or label.</p>
<p>There are three types of visual indicators for each type of project:</p>
<ol class="arabic simple">
<li>There should be no indicator for projects that are tied to a
<a class="reference internal" href="#grant-ownership">grant owner</a> and users should solely rely on the
always-present namespace. If an indicator is chosen, it should not be
a check mark or similar because it may mistakingly convey that there are
associated security guarantees inherent to the use of the package.
Additionally, some social media platforms use a check mark for verified
users which may cause confusion.</li>
<li>Projects that are not tied to a <a class="reference internal" href="#grant-ownership">grant owner</a> and are
part of a <a class="reference internal" href="#shared-namespaces">shared</a> namespace should never have an
indicator that conveys mistrust or danger. A good choice might be the
<a class="reference external" href="https://fontawesome.com/icons/users">users</a> icon from Font Awesome or the
<a class="reference external" href="https://fonts.google.com/icons?selected=Material+Symbols+Outlined:groups">groups</a> icon from Google Fonts.</li>
<li>Projects that are not tied to a <a class="reference internal" href="#grant-ownership">grant owner</a> and are
part of a private grant (i.e. existed before the grant) should have an
indicator that conveys inauthenticity or lack of trust. A good choice might
be a warning sign (⚠).</li>
</ol>
</section>
<section id="id22">
<h3><a class="toc-backref" href="#id22" role="doc-backlink">Grant Applications</a></h3>
<p>Generally speaking, reviewers should be more tolerant of corporate
organizations that apply for grants for which they are not yet using.</p>
<p>For example, while it’s reasonable to grant a namespace to a startup or an
existing company with a new product line, it’s not as reasonable to grant a
namespace to a community project that doesn’t have many users.</p>
</section>
</section>
<section id="backwards-compatibility">
<h2><a class="toc-backref" href="#backwards-compatibility" role="doc-backlink">Backwards Compatibility</a></h2>
<p>There are no intrinsic concerns because there is still a flat namespace and
installers need no modification. Additionally, many projects have already
chosen to signal a shared purpose with a prefix like <a class="reference external" href="https://github.com/python/typeshed/issues/2491#issuecomment-578456045">typeshed has done</a>.</p>
</section>
<section id="security-implications">
<h2><a class="toc-backref" href="#security-implications" role="doc-backlink">Security Implications</a></h2>
<ul class="simple">
<li>Although users will no longer see the visual indicator when a namespace
becomes unclaimed, external consumers of metadata may have difficulty
scraping the user facing
<a class="reference internal" href="#user-interface">enumeration</a> of grants to verify current ownership.</li>
<li>There is an opportunity to build on top of <a class="pep reference internal" href="../pep-0740/" title="PEP 740 – Index support for digital attestations">PEP 740</a> and <a class="pep reference internal" href="../pep-0480/" title="PEP 480 – Surviving a Compromise of PyPI: End-to-end signing of packages">PEP 480</a> so that
one could prove cryptographically that a specific release came from an owner
of the associated namespace. This PEP makes no effort to describe how this
will happen other than that work is planned for the future.</li>
</ul>
</section>
<section id="how-to-teach-this">
<h2><a class="toc-backref" href="#how-to-teach-this" role="doc-backlink">How to Teach This</a></h2>
<p>For organizations, we will document how to reserve namespaces, what the
benefits are and pricing.</p>
<p>For consumers of packages we will document the indicator on release pages, how
metadata is exposed in the <a class="reference internal" href="#repository-metadata">API</a> and potentially in
future note tooling that supports utilizing namespaces to provide extra
security guarantees during installation.</p>
</section>
<section id="reference-implementation">
<h2><a class="toc-backref" href="#reference-implementation" role="doc-backlink">Reference Implementation</a></h2>
<p>None at this time.</p>
</section>
<section id="rejected-ideas">
<h2><a class="toc-backref" href="#rejected-ideas" role="doc-backlink">Rejected Ideas</a></h2>
<section id="organization-scoping">
<h3><a class="toc-backref" href="#organization-scoping" role="doc-backlink">Organization Scoping</a></h3>
<p>The primary motivation for this PEP is to reduce dependency confusion attacks
and NPM-style scoping with an allowance of the legacy flat namespace would
increase the risk. If documentation instructed a user to install <code class="docutils literal notranslate"><span class="pre">bar</span></code> in the
namespace <code class="docutils literal notranslate"><span class="pre">foo</span></code> then the user must be careful to install <code class="docutils literal notranslate"><span class="pre">&#64;foo/bar</span></code> and not
<code class="docutils literal notranslate"><span class="pre">foo-bar</span></code>, or vice versa. The Python packaging ecosystem has normalization
rules for names in order to maximize the ease of communication and this would
be a regression.</p>
<p>The runtime environment of Python is also not conducive to scoping. Whereas
multiple versions of the same JavaScript package may coexist, Python only
allows a single global namespace. Barring major changes to the language itself,
this is nearly impossible to change. Additionally, users have come to expect
that the package name is usually the same as what they would import and
eliminating the flat namespace would do away with that convention.</p>
<p>Scoping would be particularly affected by organization changes which are bound
to happen over time. An organization may change their name due to internal
shuffling, an acquisition, or any other reason. Whenever this happens every
project they own would in effect be renamed which would cause unnecessary
confusion for users, frequently.</p>
<p>Users have come to expect that package names may be typed without worry of
conflicting shell syntax and any namespace solution would pose challenges:</p>
<ul class="simple">
<li>Copying NPM’s syntax (e.g. <code class="docutils literal notranslate"><span class="pre">&#64;foo/bar</span></code>) would alienate a large number of
Windows users because the <code class="docutils literal notranslate"><span class="pre">&#64;</span></code> character is considered special in
<a class="reference external" href="https://learn.microsoft.com/en-us/powershell/scripting/lang-spec/chapter-07?view=powershell-7.4#717--operator">PowerShell</a>.</li>
<li>Starting names with a <code class="docutils literal notranslate"><span class="pre">/</span></code> would conflict with the common installer
capability of accepting paths without URI <code class="docutils literal notranslate"><span class="pre">file://</span></code> syntax.</li>
<li>Starting names with a <code class="docutils literal notranslate"><span class="pre">//</span></code> like Bazel
<a class="reference external" href="https://bazel.build/run/build#specifying-build-targets">target patterns</a>
would be confusing to users because the current normalization standard
eliminates consecutive separator characters.</li>
</ul>
<p>Finally, the disruption to the community would be massive because it would
require an update from every package manager, security scanner, IDE, etc. New
packages released with the scoping would be incompatible with older tools and
would cause confusion for users along with frustration from maintainers having
to triage such complaints.</p>
</section>
<section id="allow-private-namespaces-for-community-projects">
<h3><a class="toc-backref" href="#allow-private-namespaces-for-community-projects" role="doc-backlink">Allow Private Namespaces for Community Projects</a></h3>
<p>This PEP enforces that the discretionary namespace grants for community
projects are <a class="reference internal" href="#shared-namespaces">shared</a>. This is almost always desired by
such projects and prevents the following situations:</p>
<ul class="simple">
<li>A perceived reduction in openness of community projects, for example if a
project was taken over by a business entity there may be a desire for it to
prevent the creation of new packages matching the namespace.</li>
<li>When an existing community project with plugins (such as MkDocs) chooses to
reserve a namespace, future plugins that are officially adopted would have to
change their name. This would cause a massive disruption to users and reset
usage statistics. The workaround is to have a new package that is advertised
which would depend on the real package but this is suboptimal.</li>
</ul>
</section>
</section>
<section id="open-issues">
<h2><a class="toc-backref" href="#open-issues" role="doc-backlink">Open Issues</a></h2>
<p>None at this time.</p>
</section>
<section id="footnotes">
<h2><a class="toc-backref" href="#footnotes" role="doc-backlink">Footnotes</a></h2>
<aside class="footnote-list brackets">
<aside class="footnote brackets" id="id25" role="doc-footnote">
<dt class="label" id="id25">[<a href="#id1">1</a>]</dt>
<dd>The following shows the package prefixes for the major cloud providers:<ul class="simple">
<li>Amazon: <a class="reference external" href="https://docs.aws.amazon.com/cdk/api/v2/python/">aws-cdk-</a></li>
<li>Google: <a class="reference external" href="https://github.com/googleapis/google-cloud-python/tree/main/packages">google-cloud-</a>
and others based on <code class="docutils literal notranslate"><span class="pre">google-</span></code></li>
<li>Microsoft: <a class="reference external" href="https://github.com/Azure/azure-sdk-for-python/tree/main/sdk">azure-</a></li>
</ul>
</aside>
<aside class="footnote brackets" id="id26" role="doc-footnote">
<dt class="label" id="id26">[2]<em> (<a href='#id2'>1</a>, <a href='#id20'>2</a>) </em></dt>
<dd>Some examples of projects that have many packages with a common prefix:<ul class="simple">
<li><a class="reference external" href="https://www.djangoproject.com">Django</a> is one of the most widely used
web frameworks in existence. They have the concept of <a class="reference external" href="https://docs.djangoproject.com/en/5.1/intro/reusable-apps/">reusable apps</a>,
which are commonly installed via
<a class="reference external" href="https://djangopackages.org">third-party packages</a> that implement a
subset of functionality to extend Django-based websites. These packages
are by convention prefixed by <code class="docutils literal notranslate"><span class="pre">django-</span></code> or <code class="docutils literal notranslate"><span class="pre">dj-</span></code>.</li>
<li><a class="reference external" href="https://jupyter.org">Project Jupyter</a> is devoted to the development of
tooling for sharing interactive documents. They support <a class="reference external" href="https://jupyterlab.readthedocs.io/en/stable/user/extensions.html">extensions</a>
which in most cases (and in all cases for officially maintained
extensions) are prefixed by <code class="docutils literal notranslate"><span class="pre">jupyter-</span></code>.</li>
<li><a class="reference external" href="https://docs.pytest.org">pytest</a> is Python’s most popular testing
framework. They have the concept of <a class="reference external" href="https://docs.pytest.org/en/stable/how-to/writing_plugins.html">plugins</a> which may be developed by
anyone and by convention are prefixed by <code class="docutils literal notranslate"><span class="pre">pytest-</span></code>.</li>
<li><a class="reference external" href="https://www.mkdocs.org">MkDocs</a> is a documentation framework based on
Markdown files. They also have the concept of
<a class="reference external" href="https://www.mkdocs.org/dev-guide/plugins/">plugins</a> which may be
developed by anyone and are usually prefixed by <code class="docutils literal notranslate"><span class="pre">mkdocs-</span></code>.</li>
<li><a class="reference external" href="https://www.sphinx-doc.org">Sphinx</a> is a documentation framework
popular for large technical projects such as
<a class="reference external" href="https://www.swift.org">Swift</a> and Python itself. They have
the concept of <a class="reference external" href="https://www.sphinx-doc.org/en/master/usage/extensions/index.html">extensions</a> which are prefixed by <code class="docutils literal notranslate"><span class="pre">sphinxcontrib-</span></code>,
many of which are maintained within a
<a class="reference external" href="https://github.com/sphinx-contrib">dedicated organization</a>.</li>
<li><a class="reference external" href="https://opentelemetry.io">OpenTelemetry</a> is an open standard for
observability with <a class="reference external" href="https://github.com/open-telemetry/opentelemetry-python">official packages</a> for the core APIs and SDK with
<a class="reference external" href="https://github.com/open-telemetry/opentelemetry-python-contrib">third-party packages</a> to collect data from various sources. All
packages are prefixed by <code class="docutils literal notranslate"><span class="pre">opentelemetry-</span></code> with child prefixes in the
form <code class="docutils literal notranslate"><span class="pre">opentelemetry-&lt;component&gt;-&lt;name&gt;-</span></code>.</li>
<li><a class="reference external" href="https://airflow.apache.org">Apache Airflow</a> is a platform to
programmatically orchestrate tasks as directed acyclic graphs (DAGs).
They have the concept of <a class="reference external" href="https://airflow.apache.org/docs/apache-airflow/stable/authoring-and-scheduling/plugins.html">plugins</a>, and also <a class="reference external" href="https://airflow.apache.org/docs/apache-airflow-providers/index.html">providers</a> which are
prefixed by <code class="docutils literal notranslate"><span class="pre">apache-airflow-providers-</span></code>.</li>
</ul>
</aside>
</aside>
</section>
<section id="copyright">
<h2><a class="toc-backref" href="#copyright" role="doc-backlink">Copyright</a></h2>
<p>This document is placed in the public domain or under the
CC0-1.0-Universal license, whichever is more permissive.</p>
</section>
</section>
<hr class="docutils" />
<p>Source: <a class="reference external" href="https://github.com/python/peps/blob/main/peps/pep-0752.rst">https://github.com/python/peps/blob/main/peps/pep-0752.rst</a></p>
<p>Last modified: <a class="reference external" href="https://github.com/python/peps/commits/main/peps/pep-0752.rst">2024-08-24 22:29:27 GMT</a></p>

        </article>
        <nav id="pep-sidebar">
            <h2>Contents</h2>
            <ul>
<li><a class="reference internal" href="#abstract">Abstract</a></li>
<li><a class="reference internal" href="#motivation">Motivation</a></li>
<li><a class="reference internal" href="#rationale">Rationale</a><ul>
<li><a class="reference internal" href="#tolerance-for-disruption">Tolerance for Disruption</a></li>
<li><a class="reference internal" href="#approval-process">Approval Process</a></li>
</ul>
</li>
<li><a class="reference internal" href="#terminology">Terminology</a></li>
<li><a class="reference internal" href="#specification">Specification</a><ul>
<li><a class="reference internal" href="#naming">Naming</a></li>
<li><a class="reference internal" href="#grant-semantics">Grant Semantics</a></li>
<li><a class="reference internal" href="#grant-types">Grant Types</a><ul>
<li><a class="reference internal" href="#root-grant">Root Grant</a></li>
<li><a class="reference internal" href="#child-grant">Child Grant</a></li>
</ul>
</li>
<li><a class="reference internal" href="#grant-ownership">Grant Ownership</a></li>
<li><a class="reference internal" href="#uploads">Uploads</a></li>
<li><a class="reference internal" href="#user-interface">User Interface</a></li>
<li><a class="reference internal" href="#shared-namespaces">Shared Namespaces</a></li>
<li><a class="reference internal" href="#repository-metadata">Repository Metadata</a></li>
<li><a class="reference internal" href="#grant-removal">Grant Removal</a></li>
<li><a class="reference internal" href="#grant-applications">Grant Applications</a><ul>
<li><a class="reference internal" href="#submission">Submission</a></li>
<li><a class="reference internal" href="#approval-criteria">Approval Criteria</a></li>
</ul>
</li>
</ul>
</li>
<li><a class="reference internal" href="#recommendations">Recommendations</a><ul>
<li><a class="reference internal" href="#visual-indicators">Visual Indicators</a></li>
<li><a class="reference internal" href="#id22">Grant Applications</a></li>
</ul>
</li>
<li><a class="reference internal" href="#backwards-compatibility">Backwards Compatibility</a></li>
<li><a class="reference internal" href="#security-implications">Security Implications</a></li>
<li><a class="reference internal" href="#how-to-teach-this">How to Teach This</a></li>
<li><a class="reference internal" href="#reference-implementation">Reference Implementation</a></li>
<li><a class="reference internal" href="#rejected-ideas">Rejected Ideas</a><ul>
<li><a class="reference internal" href="#organization-scoping">Organization Scoping</a></li>
<li><a class="reference internal" href="#allow-private-namespaces-for-community-projects">Allow Private Namespaces for Community Projects</a></li>
</ul>
</li>
<li><a class="reference internal" href="#open-issues">Open Issues</a></li>
<li><a class="reference internal" href="#footnotes">Footnotes</a></li>
<li><a class="reference internal" href="#copyright">Copyright</a></li>
</ul>

            <br>
            <a id="source" href="https://github.com/python/peps/blob/main/peps/pep-0752.rst">Page Source (GitHub)</a>
        </nav>
    </section>
    <script src="../_static/colour_scheme.js"></script>
    <script src="../_static/wrap_tables.js"></script>
    <script src="../_static/sticky_banner.js"></script>
</body>
</html>